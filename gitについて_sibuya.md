# Gitについて
## Gitとは？
バージョン管理システムである。
Gitを使う事によって、コードを前の状態に戻したりなど、バージョン管理が容易になる。
## Gitの基礎用語
参考にしたサイト一覧

[Git 基本の用語集](https://qiita.com/toshi_um/items/72c9d929a600323b2e77)

[オレならこう説明する！Git初心者への用語説明](https://qiita.com/nnahito/items/e546b27f73e7be131d4e)

[【イラストで覚える】初心者のためのGitとGitHub用語集](https://zukulog098r.com/git/)


[怖くない git reset](https://www.r-staffing.co.jp/engineer/entry/20191129_1)

### <b>リポジトリ</b>
ファイルやディレクトリの状態を記録する場所のこと

ローカルリポジトリとリモートリポジトリがある。

### <b>ローカルリポジトリ</b>
自分のマシン上に作られるリポジトリ。

ユーザー一人一人が持っている。

### <b>リモートリポジトリ</b>
ネットワーク上に存在するリポジトリ。複数人で管理をしている。

### <b>クローン</b>
リモートリポジトリをローカルリポジトリとして保存すること。

イメージとしてはダウンロードに近い

### <b>ブランチ</b>
作業履歴を枝分かれさせて記録していくためのもの。

ブランチ上での変更は他ブランチに影響しないしされない。
### <b>チェックアウト</b>
作業対象となっているブランチを切り替えること。

※「作業対象となっているブランチやコミット」を「ヘッド」という。

### <b>コミット</b>
ファイルやディレクトリの変更をリポジトリに記録すること。

コミットを実行すると前回コミットした時の状態から現在の状態までの差分を記録したコミットが作成される。

### <b>プッシュ</b>
ローカルリポジトリの変更をリモートリポジトリに反映させること

イメージとしてはアップロードに近い

### <b>プル</b>
リモートリポジトリの変更をローカルリポジトリに反映させること
### <b>マージ</b>
元のブランチとマージ先のブランチを結合した新しいコミットを作成すること

## <b>議題1.コンフリクトはなぜ起きるのか</b>
#### **コンフリクトとは？**
同じファイルの同じ場所への変更が同時にマージされている状態のこと。

この状態ではどの変更を優先したらいいかわからないため、マージに失敗する。

#### **どうやって解消するのか？**
`コンフリクトが起きた箇所を、「目標とする記述」に整える`

「最終的にどういったコードにしたいか」を考え、いらない部分を削除する。

#### <b>コンフリクトが起こらないためにはどうすればよいか？</b>
同時に同じファイルをいじらないようにする！

[UI開発で行っている対策](https://www.chatwork.com/#!rid197699808-1473975964705853440)

## **議題2.知っておいてほしい便利機能について**
### **リべース**
二つのブランチの内容を一つのブランチに統合することで、コミットを綺麗にすることができるコマンド。

### **マージとの比較**
二つのブランンチの内容をまとめるという点ではマージと同様である。

最も大きな違いは、既存のコミットへ影響を与えるか否かである。

マージは全ての履歴が残るため、元のコミットを壊してしまう心配がない。

その一方で、マージの回数が増えれば増えるほど、履歴が複雑になってしまい、レビューを行う際などに苦痛に感じる可能性がある。

リベースは履歴をきちんと整理し、関係性のあるもののみでまとめることができる。

ただし、元のコミットの内容を変更するため、元のコミットを動かない状態にしてしまうことがある。

### **結局どっちを使えばいいの？**
チームの運用方針に応じて使い分けるのが吉。

事故が怖い場合、チームとして以下のような対策ができる。

**githubでブランチをprotectedに設定する**

これを行うと、プルリクエストに対して承認(Approve)されるまではマージできなくなる！
### **cherry pick**
別のブランチから今いるブランチへ、必要なコミットだけをコピーすることができる。

マージ先のブランチに「統合したくないコミット」がある際に役に立つ。

以下のように入力することで必要なコミットだけをコピーできる
```
git cherry-pick [コミットID]
```
cherry-pickを実行すると、内容がそのままコミットされる。

コミットせずに作業ディレクトリのみを変更したい場合は以下のように入力する
```
git cherry-pick -n [コミットID]
```
### **stash**
コミットしていない変更を退避(一時保存)することができる。

作業中に他のブランチでの作業が必要になったときに使える。

以下のように入力することで、変更を一時保存できる。
```
git stash save "stash message"
```
"stash message"の部分は任意だが、名前をつけておくことで非常に管理がしやすくなる。

また、stashの性質上、一度呼び出した後は用済みになることが多い。

以下のように入力することで、stashの呼び出しと削除を同時に行うことができる！
```
git stash pop stash@{0}
```
## **議題3.知っておけばいざというときも安心なコマンドについて**
### **reflog**
操作履歴を見ることができるコマンド。

操作を間違えてしまった時にそれを元に戻す際に使える
```
git reflog
```
上記を入力することで履歴を確認し、以下を入力することでファイルを巻き戻すことができる。

```
git reset --hard HEAD@{n}
```
**おまけ**

**reset --hardについて**

git resetには以下の3段階がある。
- git reset --soft
- git reset --mixed
- git reset --hard

git reset --hardは一番強力なコマンドであり、リポジトリ、ステージングエリア、作業ディレクトリの３つ全てがHEADにあわせて巻き戻る。

そのため、プッシュ前のコミットに対してのみ使うようにしないと、他の人のmasterブランチにも影響が出てしまう。

![タイトル](git.png)

ちなみに、git reset --mixedはリポジトリとステージングエリアが、git reset --softはリポジトリがそれぞれHEADに合わせて巻き戻る。

**まとめ**

gitの基礎コマンドについて学び直すことができた。

また、議題2,3ではさまざまな便利機能を知るとともに、ミスをした時のリカバリーのやり方も知ることができたため、Gitに対する謎の不安を減らすことができた。
